<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover">
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;800;900&family=Rajdhani:wght@300;400;500;600;700&family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<title>The Silent Signal</title>
<style>
/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   THE SILENT SIGNAL ‚Äî ULTIMATE PINK GLITTER CSS
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
:root{
--bg:#0a0008;--card-bg:rgba(255,80,150,0.04);--border:rgba(255,20,147,0.08);
--border-glow:rgba(255,20,147,0.5);--primary:#FF1493;--primary-rgb:255,20,147;
--secondary:#FF69B4;--secondary-rgb:255,105,180;--neon-pink:#FF10F0;
--neon-purple:#D946EF;--soft-pink:#FFB6C1;--deep-purple:#9333EA;
--hot:#FF006E;--blush:rgba(255,182,193,0.15);
--text:#fff;--text-dim:rgba(255,255,255,0.6);--text-muted:rgba(255,255,255,0.3);
--font-display:'Orbitron',monospace;--font-body:'Space Grotesk',sans-serif;
--font-accent:'Rajdhani',sans-serif;
--safe-top:env(safe-area-inset-top);--safe-bottom:env(safe-area-inset-bottom);
}
*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
html,body{width:100%;height:100%;overflow:hidden;font-family:var(--font-body);background:var(--bg);color:var(--text);user-select:none;-webkit-user-select:none}

/* ‚ïê‚ïê‚ïê PINK AURORA ‚ïê‚ïê‚ïê */
.aurora{position:fixed;inset:0;z-index:0;
background:radial-gradient(ellipse at 15% 15%,rgba(var(--primary-rgb),0.1),transparent 50%),
radial-gradient(ellipse at 85% 85%,rgba(217,70,239,0.07),transparent 50%),
radial-gradient(ellipse at 50% 0%,rgba(var(--secondary-rgb),0.05),transparent 40%),
radial-gradient(ellipse at 50% 100%,rgba(var(--primary-rgb),0.06),transparent 40%),var(--bg)}
.aorb{position:absolute;border-radius:50%;filter:blur(80px);animation:aOD 20s ease-in-out infinite;mix-blend-mode:screen}
.ao1{width:55vw;height:55vw;top:-15%;left:-15%;background:radial-gradient(circle,rgba(var(--primary-rgb),0.15),transparent 70%);animation-duration:22s}
.ao2{width:45vw;height:45vw;bottom:-20%;right:-15%;background:radial-gradient(circle,rgba(217,70,239,0.12),transparent 70%);animation-duration:18s;animation-delay:-8s}
.ao3{width:35vw;height:35vw;top:30%;left:60%;background:radial-gradient(circle,rgba(var(--secondary-rgb),0.08),transparent 70%);animation-duration:25s;animation-delay:-12s}
@keyframes aOD{0%,100%{transform:translate(0,0) scale(1);opacity:.5}25%{transform:translate(5%,-8%) scale(1.15);opacity:.7}50%{transform:translate(-3%,5%) scale(.9);opacity:.4}75%{transform:translate(4%,3%) scale(1.1);opacity:.6}}

/* Grid + scanlines */
.grid-ov{position:fixed;inset:0;z-index:1;pointer-events:none;background-image:linear-gradient(rgba(255,20,147,0.01) 1px,transparent 1px),linear-gradient(90deg,rgba(255,20,147,0.01) 1px,transparent 1px);background-size:50px 50px}

/* ‚ïê‚ïê‚ïê GLITTER PARTICLES ‚ïê‚ïê‚ïê */
.particles{position:fixed;inset:0;z-index:3;pointer-events:none;overflow:hidden}
.ptc{position:absolute;opacity:0;animation:ptcR linear infinite}
.ptc-dot{border-radius:50%;background:rgba(var(--primary-rgb),0.5);box-shadow:0 0 6px rgba(var(--primary-rgb),0.4),0 0 12px rgba(var(--primary-rgb),0.2)}
.ptc-heart{filter:drop-shadow(0 0 6px rgba(var(--primary-rgb),0.5))}
.ptc-sparkle{background:#fff;border-radius:50%;box-shadow:0 0 3px #fff,0 0 6px rgba(var(--primary-rgb),0.5),0 0 12px rgba(var(--primary-rgb),0.3)}
.ptc-star{text-shadow:0 0 8px rgba(var(--primary-rgb),0.4)}
@keyframes ptcR{0%{transform:translateY(110vh) translateX(0) rotate(0) scale(0);opacity:0}4%{opacity:.7;transform:translateY(100vh) scale(1)}25%{transform:translateY(75vh) translateX(15px) rotate(90deg)}50%{transform:translateY(50vh) translateX(-10px) rotate(180deg);opacity:.3}100%{transform:translateY(-5vh) rotate(360deg) scale(.3);opacity:0}}

/* ‚ïê‚ïê‚ïê GLASSMORPHISM ‚ïê‚ïê‚ïê */
.glass{background:rgba(255,20,147,0.03);backdrop-filter:blur(25px);-webkit-backdrop-filter:blur(25px);border:1px solid rgba(255,20,147,0.08);box-shadow:0 8px 32px rgba(0,0,0,0.2),0 0 15px rgba(var(--primary-rgb),0.03),inset 0 1px 0 rgba(255,255,255,0.04)}
.neon-border{position:relative;overflow:hidden}
.neon-border::before{content:'';position:absolute;top:-1px;left:10%;right:10%;height:1px;background:linear-gradient(90deg,transparent,rgba(var(--primary-rgb),0.6),rgba(217,70,239,0.4),transparent);animation:nS 4s ease-in-out infinite}
@keyframes nS{0%,100%{left:10%;right:10%;opacity:.4}50%{left:20%;right:20%;opacity:1}}
.breath-border{animation:bG 4s ease-in-out infinite}
@keyframes bG{0%,100%{border-color:rgba(var(--primary-rgb),0.06)}50%{border-color:rgba(var(--primary-rgb),0.2);box-shadow:0 0 25px rgba(var(--primary-rgb),0.06)}}

/* ‚ïê‚ïê‚ïê SHIMMER TEXT ‚ïê‚ïê‚ïê */
.shimmer-text{background:linear-gradient(120deg,var(--soft-pink) 0%,var(--primary) 20%,var(--neon-purple) 40%,var(--primary) 55%,#fff 70%,var(--primary) 85%,var(--soft-pink) 100%);background-size:300% 100%;-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;animation:shim 5s linear infinite}
@keyframes shim{0%{background-position:300% 0}100%{background-position:-300% 0}}
.gradient-text{background:linear-gradient(135deg,var(--primary),var(--neon-purple),var(--secondary));background-size:200% 200%;-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;animation:gSh 4s ease infinite}
@keyframes gSh{0%,100%{background-position:0% 50%}50%{background-position:100% 50%}}

/* ‚ïê‚ïê‚ïê LIQUID BUTTON ‚ïê‚ïê‚ïê */
.liquid-btn{position:relative;overflow:hidden;border:none;border-radius:14px;padding:15px 30px;cursor:pointer;font-family:var(--font-display);font-size:11px;font-weight:700;letter-spacing:3px;text-transform:uppercase;color:#fff;background:linear-gradient(135deg,var(--primary),var(--neon-purple),var(--hot),var(--primary));background-size:300% 300%;animation:lF 6s ease infinite;box-shadow:0 4px 20px rgba(var(--primary-rgb),0.35),0 0 30px rgba(var(--primary-rgb),0.1);transition:all .3s}
@keyframes lF{0%{background-position:0% 50%}25%{background-position:50% 0%}50%{background-position:100% 50%}75%{background-position:50% 100%}100%{background-position:0% 50%}}
.liquid-btn::before{content:'';position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:linear-gradient(45deg,transparent 40%,rgba(255,255,255,0.08) 44%,rgba(255,255,255,0.2) 50%,rgba(255,255,255,0.08) 56%,transparent 60%);animation:lSh 3s infinite}
@keyframes lSh{0%{transform:translateX(-100%) rotate(25deg)}100%{transform:translateX(100%) rotate(25deg)}}
.liquid-btn:active{transform:scale(.95)}
.liquid-btn.loading{pointer-events:none;opacity:.7}
.liquid-btn.loading .btn-text{visibility:hidden}
.liquid-btn.loading .spinner{position:absolute;top:50%;left:50%;margin:-10px 0 0 -10px;width:20px;height:20px;border:2px solid rgba(255,255,255,.2);border-top-color:#fff;border-radius:50%;animation:spin .7s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}

/* ‚ïê‚ïê‚ïê PAGES ‚ïê‚ïê‚ïê */
.page{position:fixed;inset:0;display:none;flex-direction:column;z-index:10;overflow:hidden}
.page.active{display:flex}
.page.anim-slide{animation:pgSl .4s cubic-bezier(.16,1,.3,1)}
.page.anim-fade{animation:pgFa .3s ease}
.page.anim-scale{animation:pgSc .4s cubic-bezier(.16,1,.3,1)}
@keyframes pgSl{from{transform:translateX(100%);opacity:0}to{transform:translateX(0);opacity:1}}
@keyframes pgFa{from{opacity:0}to{opacity:1}}
@keyframes pgSc{from{transform:scale(.92);opacity:0}to{transform:scale(1);opacity:1}}

/* ‚ïê‚ïê‚ïê SPLASH ‚ïê‚ïê‚ïê */
#pg-splash{justify-content:center;align-items:center;background:radial-gradient(ellipse at 50% 40%,rgba(var(--primary-rgb),0.08),var(--bg) 70%)}
.sp-wrap{text-align:center;position:relative}
.sp-glow{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:200px;height:200px;border-radius:50%;background:radial-gradient(circle,rgba(var(--primary-rgb),0.15),transparent 70%);animation:spGP 3s ease-in-out infinite}
@keyframes spGP{0%,100%{transform:translate(-50%,-50%) scale(1);opacity:.4}50%{transform:translate(-50%,-50%) scale(1.5);opacity:.8}}
.sp-pulse{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}
.sp-ring{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:80px;height:80px;border-radius:50%;border:1px solid rgba(var(--primary-rgb),0.15);animation:spRE 3s ease-out infinite}
.sp-ring:nth-child(2){animation-delay:1s}.sp-ring:nth-child(3){animation-delay:2s;width:60px;height:60px}
@keyframes spRE{0%{transform:translate(-50%,-50%) scale(.5);opacity:.8}100%{transform:translate(-50%,-50%) scale(4);opacity:0}}
.sp-icon{font-size:64px;position:relative;z-index:2;animation:spHB 1.8s ease-in-out infinite;filter:drop-shadow(0 0 30px rgba(var(--primary-rgb),0.5)) drop-shadow(0 0 60px rgba(var(--primary-rgb),0.2))}
@keyframes spHB{0%,100%{transform:scale(1)}15%{transform:scale(1.15)}30%{transform:scale(1)}45%{transform:scale(1.1)}}
.sp-brand{margin-top:30px;font-family:var(--font-display);font-size:14px;font-weight:800;letter-spacing:6px;text-transform:uppercase;animation:fU .8s ease .5s both}
.sp-line{width:50px;height:2px;margin:14px auto;background:linear-gradient(90deg,transparent,var(--primary),var(--neon-purple),var(--primary),transparent);animation:fU .8s ease .8s both;border-radius:2px}
.sp-sub{font-family:var(--font-accent);font-size:12px;color:var(--soft-pink);letter-spacing:4px;text-transform:uppercase;animation:fU .8s ease 1.1s both;opacity:.5}
@keyframes fU{from{opacity:0;transform:translateY(18px)}to{opacity:1;transform:translateY(0)}}
.sp-loader{display:flex;gap:8px;justify-content:center;margin-top:45px;animation:fU .8s ease 1.4s both}
.sp-ldot{width:6px;height:6px;border-radius:50%;background:var(--primary);box-shadow:0 0 12px rgba(var(--primary-rgb),0.6),0 0 24px rgba(var(--primary-rgb),0.3);animation:spDP 1.6s ease-in-out infinite}
.sp-ldot:nth-child(2){animation-delay:.2s}.sp-ldot:nth-child(3){animation-delay:.4s}
@keyframes spDP{0%,100%{opacity:.2;transform:scale(.7)}50%{opacity:1;transform:scale(1.4)}}

/* ‚ïê‚ïê‚ïê LOGIN ‚ïê‚ïê‚ïê */
#pg-login{justify-content:center;align-items:center;padding:24px}
.login-card{width:100%;max-width:340px;padding:36px 24px;border-radius:24px;text-align:center;animation:pgSc .5s cubic-bezier(.16,1,.3,1)}
.login-icon{font-size:42px;margin-bottom:8px;animation:lFl 4s ease-in-out infinite;filter:drop-shadow(0 0 20px rgba(var(--primary-rgb),0.4))}
@keyframes lFl{0%,100%{transform:translateY(0)}25%{transform:translateY(-8px) rotate(3deg)}75%{transform:translateY(-4px) rotate(-2deg)}}
.login-title{font-family:var(--font-display);font-size:12px;font-weight:700;letter-spacing:4px;text-transform:uppercase}
.login-sub{font-family:var(--font-accent);font-size:13px;color:var(--text-muted);margin:6px 0 28px;letter-spacing:1px}
.inp-group{position:relative;margin-bottom:14px;text-align:left}
.inp-label{font-family:var(--font-display);font-size:7px;font-weight:500;letter-spacing:3px;color:var(--soft-pink);text-transform:uppercase;margin-bottom:6px;display:block;opacity:.5}
.inp{width:100%;padding:13px 16px;border-radius:12px;border:1px solid rgba(var(--primary-rgb),0.08);background:rgba(var(--primary-rgb),0.02);color:#fff;font-family:var(--font-body);font-size:14px;outline:none;transition:all .4s}
.inp:focus{border-color:rgba(var(--primary-rgb),0.35);background:rgba(var(--primary-rgb),0.04);box-shadow:0 0 0 3px rgba(var(--primary-rgb),0.06),0 0 20px rgba(var(--primary-rgb),0.05)}
.inp::placeholder{color:rgba(255,182,193,0.2)}
textarea.inp{resize:none;min-height:100px;line-height:1.6}
.login-error{font-family:var(--font-accent);color:var(--soft-pink);font-size:12px;margin-top:12px;min-height:18px}
.shake{animation:shk .5s cubic-bezier(.36,.07,.19,.97)}
@keyframes shk{10%,90%{transform:translateX(-3px)}20%,80%{transform:translateX(5px)}30%,50%,70%{transform:translateX(-7px)}40%,60%{transform:translateX(7px)}}

/* ‚ïê‚ïê‚ïê NAV / HEADERS ‚ïê‚ïê‚ïê */
.nav-bar,.pg-header{display:flex;align-items:center;padding:12px 16px;padding-top:max(12px,var(--safe-top));border-bottom:1px solid var(--border);background:rgba(10,0,8,0.85);backdrop-filter:blur(25px);-webkit-backdrop-filter:blur(25px);z-index:5;position:relative;min-height:56px}
.nav-bar{justify-content:space-between}
.pg-header{gap:12px}
.nav-bar::after,.pg-header::after{content:'';position:absolute;bottom:-1px;left:0;right:0;height:1px;background:linear-gradient(90deg,transparent,rgba(var(--primary-rgb),0.2),transparent)}
.nav-left{display:flex;align-items:center;gap:8px}
.nav-icon{font-size:16px;filter:drop-shadow(0 0 10px rgba(var(--primary-rgb),0.5));animation:navIP 3s ease-in-out infinite}
@keyframes navIP{0%,100%{filter:drop-shadow(0 0 5px rgba(var(--primary-rgb),.3))}50%{filter:drop-shadow(0 0 15px rgba(var(--primary-rgb),.7))}}
.nav-title{font-family:var(--font-display);font-size:9px;font-weight:600;letter-spacing:2px;text-transform:uppercase}
.nav-right{display:flex;align-items:center;gap:12px}
.nav-status{display:flex;align-items:center;gap:4px;font-family:var(--font-accent);font-size:10px;color:var(--text-dim)}
.status-dot{width:6px;height:6px;border-radius:50%;box-shadow:0 0 10px currentColor;animation:stP 2s ease-in-out infinite}
@keyframes stP{0%,100%{box-shadow:0 0 5px currentColor}50%{box-shadow:0 0 15px currentColor,0 0 25px currentColor}}
.s-on{background:#4ADE80;color:#4ADE80}.s-off{background:#FF6B9D;color:#FF6B9D}
.nav-avatar{width:32px;height:32px;border-radius:10px;background:rgba(var(--primary-rgb),0.06);border:1px solid var(--border);display:flex;align-items:center;justify-content:center;font-size:15px;cursor:pointer;transition:all .3s}
.nav-avatar:active{transform:scale(.88);border-color:var(--border-glow)}
.btn-back{width:36px;height:36px;border-radius:10px;border:1px solid var(--border);background:rgba(var(--primary-rgb),0.04);color:#fff;font-size:15px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .25s;flex-shrink:0}
.btn-back:active{transform:scale(.85);border-color:var(--border-glow)}
.pg-title{font-family:var(--font-display);font-size:10px;font-weight:600;letter-spacing:2px;text-transform:uppercase;flex:1}
.pg-body{flex:1;overflow-y:auto;overflow-x:hidden;-webkit-overflow-scrolling:touch;padding:16px}
.pg-header-btn{padding:7px 14px;border-radius:50px;border:1px solid rgba(var(--primary-rgb),0.2);background:rgba(var(--primary-rgb),0.06);color:var(--soft-pink);font-family:var(--font-accent);font-size:11px;cursor:pointer;transition:all .3s;flex-shrink:0}
.pg-header-btn:active{background:rgba(var(--primary-rgb),0.15);transform:scale(.95)}

/* ‚ïê‚ïê‚ïê HOME ‚ïê‚ïê‚ïê */
.home-scroll{flex:1;overflow-y:auto;-webkit-overflow-scrolling:touch;padding-bottom:max(40px,var(--safe-bottom))}
.greeting-banner{margin:16px 14px;padding:22px 18px;border-radius:20px;text-align:center;position:relative;overflow:hidden;animation:pgSc .5s cubic-bezier(.16,1,.3,1);background:linear-gradient(135deg,rgba(var(--primary-rgb),0.08),rgba(217,70,239,0.04))}
.greeting-banner::before{content:'';position:absolute;top:0;left:10%;right:10%;height:1px;background:linear-gradient(90deg,transparent,rgba(var(--primary-rgb),0.4),transparent)}
.greet-emoji{font-size:36px;display:block;margin-bottom:8px;animation:gFl 5s ease-in-out infinite;filter:drop-shadow(0 0 15px rgba(var(--primary-rgb),0.3))}
@keyframes gFl{0%,100%{transform:translateY(0)}50%{transform:translateY(-6px)}}
.greeting-name{font-family:var(--font-display);font-size:14px;font-weight:700}
.greeting-name span{color:var(--primary);text-shadow:0 0 25px rgba(var(--primary-rgb),0.4)}
.greeting-date{font-family:var(--font-accent);color:var(--soft-pink);font-size:13px;margin-top:4px;opacity:.7}
.greeting-tagline{font-family:var(--font-accent);color:rgba(var(--primary-rgb),0.35);font-size:11px;margin-top:4px;font-style:italic}
.quick-row{display:flex;gap:8px;padding:0 14px;margin:14px 0;overflow-x:auto;scrollbar-width:none}
.quick-row::-webkit-scrollbar{display:none}
.quick-btn{flex-shrink:0;padding:8px 16px;border-radius:50px;border:1px solid var(--border);background:rgba(var(--primary-rgb),0.04);color:var(--soft-pink);font-family:var(--font-accent);font-size:12px;cursor:pointer;white-space:nowrap;transition:all .3s}
.quick-btn:active{background:rgba(var(--primary-rgb),0.12);border-color:rgba(var(--primary-rgb),0.3);color:#fff;transform:scale(.96)}
.section-label{font-family:var(--font-display);font-size:8px;font-weight:600;letter-spacing:4px;color:var(--soft-pink);text-transform:uppercase;padding:0 14px;margin:18px 0 14px;opacity:.4}

/* ‚ïê‚ïê‚ïê FEATURE GRID ‚ïê‚ïê‚ïê */
.section-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;padding:0 14px}
.section-card{background:rgba(var(--primary-rgb),0.03);backdrop-filter:blur(15px);-webkit-backdrop-filter:blur(15px);border:1px solid rgba(var(--primary-rgb),0.06);border-radius:16px;padding:16px 8px;text-align:center;cursor:pointer;position:relative;overflow:hidden;transition:all .35s cubic-bezier(.4,0,.2,1)}
.section-card::before{content:'';position:absolute;top:0;left:20%;right:20%;height:1px;background:linear-gradient(90deg,transparent,rgba(var(--primary-rgb),0.15),transparent);opacity:0;transition:opacity .3s}
.section-card::after{content:'';position:absolute;inset:0;background:radial-gradient(circle at 50% 30%,rgba(var(--primary-rgb),0.08),transparent 60%);opacity:0;transition:opacity .3s;pointer-events:none}
.section-card:active{transform:scale(.93);border-color:rgba(var(--primary-rgb),0.2);box-shadow:0 0 25px rgba(var(--primary-rgb),0.1)}
.section-card:active::before,.section-card:active::after{opacity:1}
.card-icon{font-size:26px;display:block;margin-bottom:6px;transition:all .35s;filter:drop-shadow(0 2px 8px rgba(0,0,0,0.3))}
.section-card:active .card-icon{transform:scale(1.15) rotate(8deg)}
.card-name{font-family:var(--font-display);font-size:7px;font-weight:600;color:var(--soft-pink);letter-spacing:1.5px;text-transform:uppercase}
.card-sub{font-family:var(--font-accent);font-size:9px;color:var(--primary);margin-top:2px;display:block;opacity:.4}
.section-card{opacity:0;animation:cR .5s cubic-bezier(.16,1,.3,1) forwards}
.section-card:nth-child(1){animation-delay:.04s}.section-card:nth-child(2){animation-delay:.08s}.section-card:nth-child(3){animation-delay:.12s}
.section-card:nth-child(4){animation-delay:.18s}.section-card:nth-child(5){animation-delay:.24s}.section-card:nth-child(6){animation-delay:.30s}
.section-card:nth-child(7){animation-delay:.36s}.section-card:nth-child(8){animation-delay:.42s}.section-card:nth-child(9){animation-delay:.48s}
@keyframes cR{from{opacity:0;transform:translateY(20px) scale(.92)}to{opacity:1;transform:translateY(0) scale(1)}}
.unread-badge{position:absolute;top:6px;right:6px;min-width:16px;height:16px;border-radius:50%;background:var(--primary);color:#fff;font-family:var(--font-display);font-size:6px;font-weight:700;display:flex;align-items:center;justify-content:center;box-shadow:0 0 12px rgba(var(--primary-rgb),0.6);animation:bP 2s ease-in-out infinite;padding:0 3px}
@keyframes bP{0%,100%{box-shadow:0 0 5px rgba(var(--primary-rgb),.4)}50%{box-shadow:0 0 18px rgba(var(--primary-rgb),.7)}}

.sync-section{margin:20px 14px 0;padding:16px;border-radius:16px;position:relative;overflow:hidden}
.sync-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}
.sync-label{font-family:var(--font-display);font-size:8px;font-weight:600;letter-spacing:2px;text-transform:uppercase}
.sync-pct{font-family:var(--font-accent);font-size:18px;font-weight:700;color:var(--secondary);text-shadow:0 0 15px rgba(var(--secondary-rgb),0.4)}
.sync-bar-bg{width:100%;height:3px;border-radius:3px;background:rgba(var(--primary-rgb),0.06);overflow:hidden}
.sync-bar{height:100%;border-radius:3px;background:linear-gradient(90deg,var(--primary),var(--neon-purple),var(--secondary));background-size:200% 100%;box-shadow:0 0 12px rgba(var(--primary-rgb),0.4);animation:sG 3s ease-in-out infinite;transition:width 1.8s}
@keyframes sG{0%,100%{box-shadow:0 0 8px rgba(var(--primary-rgb),.3)}50%{box-shadow:0 0 20px rgba(var(--primary-rgb),.6)}}
.quote-section{margin:14px 14px 0;padding:16px 18px;border-radius:16px;text-align:center}
.quote-text{font-family:var(--font-accent);font-size:12px;color:rgba(var(--primary-rgb),0.4);line-height:1.7;font-style:italic}
.home-ft{text-align:center;padding:30px 0 10px;font-family:var(--font-accent);font-size:9px;color:rgba(var(--primary-rgb),0.15);letter-spacing:3px}

/* ‚ïê‚ïê‚ïê CHAT ‚ïê‚ïê‚ïê */
.chat-header{display:flex;align-items:center;gap:10px;padding:10px 14px;padding-top:max(10px,var(--safe-top));border-bottom:1px solid var(--border);background:rgba(10,0,8,0.9);backdrop-filter:blur(30px);-webkit-backdrop-filter:blur(30px);z-index:5}
.chat-hdr-info{flex:1}.chat-hdr-name{font-family:var(--font-display);font-size:10px;font-weight:600;letter-spacing:1.5px;text-transform:uppercase}
.chat-hdr-status{display:flex;align-items:center;gap:4px;font-family:var(--font-accent);font-size:10px;color:var(--text-dim);margin-top:2px}
.chat-hdr-avatar{width:36px;height:36px;border-radius:50%;background:linear-gradient(135deg,rgba(var(--primary-rgb),0.12),rgba(217,70,239,0.08));border:1px solid rgba(var(--primary-rgb),0.15);display:flex;align-items:center;justify-content:center;font-size:18px;box-shadow:0 0 15px rgba(var(--primary-rgb),0.12)}
.chat-msgs{flex:1;overflow-y:auto;-webkit-overflow-scrolling:touch;padding:14px;display:flex;flex-direction:column;gap:5px}
.chat-empty{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;text-align:center;opacity:.5}
.chat-empty-icon{font-size:50px;margin-bottom:12px;animation:gFl 3s ease-in-out infinite}
.chat-empty-text{font-family:var(--font-display);font-size:10px;letter-spacing:2px;color:var(--text-muted);text-transform:uppercase}
.msg-date-sep{text-align:center;padding:10px 0 6px;position:relative}
.msg-date-sep span{font-family:var(--font-display);font-size:7px;font-weight:600;letter-spacing:2px;text-transform:uppercase;color:var(--soft-pink);opacity:.4;background:var(--bg);padding:0 12px;position:relative;z-index:1}
.msg-date-sep::before{content:'';position:absolute;top:50%;left:8%;right:8%;height:1px;background:linear-gradient(90deg,transparent,rgba(var(--primary-rgb),0.1),transparent)}
.msg-row{display:flex;max-width:80%;animation:mI .3s cubic-bezier(.16,1,.3,1)}.msg-row.sent{align-self:flex-end}.msg-row.received{align-self:flex-start}
@keyframes mI{from{opacity:0;transform:translateY(10px) scale(.96)}to{opacity:1;transform:translateY(0) scale(1)}}
.msg-bubble{padding:9px 13px;border-radius:16px;font-size:13px;line-height:1.5;word-wrap:break-word;position:relative}
.sent .msg-bubble{background:linear-gradient(135deg,rgba(var(--primary-rgb),0.2),rgba(217,70,239,0.12));border:1px solid rgba(var(--primary-rgb),0.12);border-bottom-right-radius:4px}
.received .msg-bubble{background:rgba(var(--primary-rgb),0.04);border:1px solid rgba(var(--primary-rgb),0.06);border-bottom-left-radius:4px}
.msg-text{font-family:var(--font-body);font-size:13px}
.msg-time{font-family:var(--font-accent);font-size:9px;color:rgba(var(--primary-rgb),0.3);margin-top:3px;display:flex;align-items:center;gap:3px}.sent .msg-time{justify-content:flex-end}
.msg-check{font-size:9px;color:rgba(var(--primary-rgb),0.3)}.msg-check.read{color:rgba(var(--primary-rgb),0.8)}
.typing-wrap{padding:4px 14px 6px;display:none;align-items:center;gap:6px}.typing-wrap.show{display:flex}
.typing-dots{display:flex;gap:3px;padding:7px 10px;background:rgba(var(--primary-rgb),0.04);border-radius:16px}
.typing-dots span{width:5px;height:5px;border-radius:50%;background:var(--primary);opacity:.3;animation:tD 1.4s ease-in-out infinite}
.typing-dots span:nth-child(2){animation-delay:.2s}.typing-dots span:nth-child(3){animation-delay:.4s}
@keyframes tD{0%,100%{opacity:.2;transform:scale(.7)}50%{opacity:.8;transform:scale(1.2)}}
.typing-label{font-family:var(--font-accent);font-size:10px;color:var(--soft-pink);opacity:.4}
.chat-input-area{display:flex;align-items:flex-end;gap:8px;padding:10px 14px;padding-bottom:max(10px,var(--safe-bottom));border-top:1px solid var(--border);background:rgba(10,0,8,0.9);backdrop-filter:blur(30px);-webkit-backdrop-filter:blur(30px)}
.chat-inp{width:100%;padding:11px 16px;border-radius:22px;border:1px solid rgba(var(--primary-rgb),0.08);background:rgba(var(--primary-rgb),0.03);color:#fff;font-family:var(--font-body);font-size:13px;outline:none;transition:all .3s}
.chat-inp:focus{border-color:rgba(var(--primary-rgb),0.25);background:rgba(var(--primary-rgb),0.05)}
.chat-inp::placeholder{color:rgba(var(--primary-rgb),0.2)}
.chat-send{width:42px;height:42px;border-radius:50%;border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:16px;transition:all .3s;background:linear-gradient(135deg,var(--primary),var(--deep-purple));color:#fff;box-shadow:0 4px 15px rgba(var(--primary-rgb),0.3);flex-shrink:0}
.chat-send:active{transform:scale(.88)}.chat-send.disabled{opacity:.3;pointer-events:none}

/* ‚ïê‚ïê‚ïê LETTERS ‚ïê‚ïê‚ïê */
.letters-tabs{display:flex;border-bottom:1px solid var(--border);background:rgba(10,0,8,0.5)}
.l-tab{flex:1;padding:10px;text-align:center;font-family:var(--font-display);font-size:8px;font-weight:600;letter-spacing:2px;text-transform:uppercase;color:var(--text-muted);cursor:pointer;transition:all .3s;position:relative}
.l-tab.active{color:var(--primary)}
.l-tab.active::after{content:'';position:absolute;bottom:-1px;left:20%;right:20%;height:2px;background:var(--primary);box-shadow:0 0 10px rgba(var(--primary-rgb),0.5);border-radius:2px}
.letter-list,.conf-list,.quotes-list,.meme-list,.memory-list,.song-list{padding:14px;display:flex;flex-direction:column;gap:10px}
.letter-item,.conf-item,.qt-item,.meme-item,.memory-item,.song-item{border-radius:16px;padding:16px;cursor:pointer;transition:all .3s;position:relative;overflow:hidden;animation:cR .4s ease forwards;opacity:0}
.letter-item::before,.conf-item::before,.qt-item::before,.memory-item::before{content:'';position:absolute;top:0;left:15%;right:15%;height:1px;background:linear-gradient(90deg,transparent,rgba(var(--primary-rgb),0.12),transparent)}
.letter-item:active,.conf-item:active{transform:scale(.98)}
.letter-item.unread{border-color:rgba(var(--primary-rgb),0.15);box-shadow:0 0 15px rgba(var(--primary-rgb),0.05)}
.letter-mood,.conf-mood{font-size:24px;float:left;margin-right:10px}
.letter-title{font-family:var(--font-display);font-size:9px;font-weight:600;letter-spacing:1px;color:var(--soft-pink);text-transform:uppercase}
.letter-preview,.conf-content{font-family:var(--font-body);font-size:13px;color:rgba(255,255,255,0.7);line-height:1.6}
.letter-preview{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:75%;margin-top:3px}
.letter-meta,.conf-meta,.qt-added{font-family:var(--font-accent);font-size:9px;color:var(--soft-pink);opacity:.4;margin-top:6px}
.letter-new-dot{position:absolute;top:16px;right:16px;width:7px;height:7px;border-radius:50%;background:var(--primary);box-shadow:0 0 10px rgba(var(--primary-rgb),0.5);animation:bP 2s infinite}
.letter-empty{text-align:center;padding:50px 20px;color:var(--text-muted)}
.letter-empty-icon{font-size:40px;margin-bottom:10px;display:block;animation:gFl 3s ease-in-out infinite}
.letter-empty-text{font-family:var(--font-display);font-size:9px;letter-spacing:2px;text-transform:uppercase}

/* Write forms */
.write-section{margin-bottom:18px}
.write-label{font-family:var(--font-display);font-size:7px;font-weight:500;letter-spacing:3px;color:var(--soft-pink);text-transform:uppercase;margin-bottom:8px;display:block;opacity:.5}
.mood-picker{display:flex;gap:8px;flex-wrap:wrap}
.mood-opt{width:40px;height:40px;border-radius:12px;border:1px solid var(--border);background:rgba(var(--primary-rgb),0.03);display:flex;align-items:center;justify-content:center;font-size:20px;cursor:pointer;transition:all .3s}
.mood-opt.sel{border-color:rgba(var(--primary-rgb),0.4);background:rgba(var(--primary-rgb),0.1);box-shadow:0 0 15px rgba(var(--primary-rgb),0.15);transform:scale(1.1)}
.mood-opt:active{transform:scale(.9)}

/* Read Letter */
.read-letter{padding:20px 16px;text-align:center}
.read-letter-mood{font-size:44px;display:block;margin-bottom:14px;animation:gFl 3s ease-in-out infinite;filter:drop-shadow(0 0 15px rgba(var(--primary-rgb),0.3))}
.read-letter-title{font-family:var(--font-display);font-size:12px;font-weight:700;letter-spacing:2px;text-transform:uppercase;color:var(--soft-pink)}
.read-letter-from{font-family:var(--font-accent);font-size:11px;color:var(--primary);margin:6px 0 18px;opacity:.5}
.read-letter-content{font-family:var(--font-body);font-size:14px;line-height:2;color:rgba(255,255,255,0.8);text-align:left;padding:18px;border-radius:16px;white-space:pre-wrap}

/* Heart buttons */
.heart-btn{display:flex;align-items:center;gap:4px;padding:5px 12px;border-radius:50px;border:1px solid var(--border);background:transparent;color:var(--text-muted);font-family:var(--font-accent);font-size:11px;cursor:pointer;transition:all .3s}
.heart-btn.hearted{border-color:rgba(var(--primary-rgb),0.3);color:var(--primary);background:rgba(var(--primary-rgb),0.06)}
.heart-btn:active{transform:scale(.9)}
.conf-footer,.qt-footer{display:flex;align-items:center;justify-content:space-between;margin-top:10px;padding-top:8px;border-top:1px solid rgba(var(--primary-rgb),0.04)}

/* ‚ïê‚ïê‚ïê TRUTH & DARE ‚ïê‚ïê‚ïê */
.tod-wrap{display:flex;flex-direction:column;align-items:center;padding:24px 16px;text-align:center}
.tod-card{width:100%;max-width:320px;border-radius:22px;padding:28px 20px;text-align:center;position:relative;overflow:hidden;min-height:180px;display:flex;flex-direction:column;align-items:center;justify-content:center}
.tod-card::before{content:'';position:absolute;top:0;left:10%;right:10%;height:1px;background:linear-gradient(90deg,transparent,rgba(var(--primary-rgb),0.3),transparent)}
.tod-emoji{font-size:44px;margin-bottom:14px;animation:gFl 3s ease-in-out infinite}
.tod-type{font-family:var(--font-display);font-size:11px;font-weight:700;letter-spacing:3px;text-transform:uppercase;margin-bottom:12px}
.tod-type.truth{color:#4ADE80}.tod-type.dare{color:var(--primary)}
.tod-question{font-family:var(--font-body);font-size:14px;line-height:1.7;color:rgba(255,255,255,0.85);padding:0 8px}
.tod-category{font-family:var(--font-accent);font-size:10px;color:var(--soft-pink);margin-top:12px;opacity:.4}
.tod-btns{display:flex;gap:10px;margin-top:24px;width:100%;max-width:320px}
.tod-btn{flex:1;padding:12px;border-radius:14px;border:1px solid var(--border);background:rgba(var(--primary-rgb),0.03);color:#fff;font-family:var(--font-display);font-size:8px;font-weight:600;letter-spacing:2px;text-transform:uppercase;cursor:pointer;transition:all .3s}
.tod-btn:active{transform:scale(.95)}
.tod-btn.truth-btn:active{border-color:rgba(74,222,128,0.4);box-shadow:0 0 20px rgba(74,222,128,0.1)}
.tod-btn.dare-btn:active{border-color:rgba(var(--primary-rgb),0.4);box-shadow:0 0 20px rgba(var(--primary-rgb),0.1)}
.tod-btn.random-btn{background:linear-gradient(135deg,rgba(var(--primary-rgb),0.08),rgba(217,70,239,0.05));border-color:rgba(var(--primary-rgb),0.12)}
.tod-flip{animation:todFlip .5s ease}
@keyframes todFlip{0%{transform:rotateY(0) scale(1)}50%{transform:rotateY(90deg) scale(.9)}100%{transform:rotateY(0) scale(1)}}

/* ‚ïê‚ïê‚ïê QUOTES ‚ïê‚ïê‚ïê */
.qt-item{text-align:center;padding:18px}
.qt-mark{font-size:24px;display:block;margin-bottom:6px;opacity:.2;color:var(--primary)}
.qt-text{font-family:var(--font-body);font-size:14px;line-height:1.8;color:rgba(255,255,255,0.75);font-style:italic}
.qt-author{font-family:var(--font-accent);font-size:11px;color:var(--primary);margin-top:8px;opacity:.5}

/* ‚ïê‚ïê‚ïê MUSIC ‚ïê‚ïê‚ïê */
.song-item{display:flex;align-items:center;gap:12px;padding:14px;cursor:pointer}
.song-icon{font-size:28px;flex-shrink:0;filter:drop-shadow(0 0 8px rgba(var(--primary-rgb),0.3))}
.song-info{flex:1;overflow:hidden}
.song-title{font-family:var(--font-display);font-size:9px;font-weight:600;letter-spacing:1px;color:var(--soft-pink);text-transform:uppercase;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.song-artist{font-family:var(--font-accent);font-size:11px;color:var(--text-muted);margin-top:2px}
.song-del{width:30px;height:30px;border-radius:50%;border:1px solid var(--border);background:transparent;color:var(--text-muted);font-size:12px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s;flex-shrink:0}
.song-del:active{background:rgba(255,50,50,0.1);border-color:rgba(255,50,50,0.3);color:#FF5050}
.music-player{padding:14px;border-top:1px solid var(--border);background:rgba(10,0,8,0.9);backdrop-filter:blur(25px);-webkit-backdrop-filter:blur(25px)}
.player-info{text-align:center;margin-bottom:10px}
.player-title{font-family:var(--font-display);font-size:9px;letter-spacing:1px;color:var(--soft-pink);text-transform:uppercase}
.player-controls{display:flex;align-items:center;justify-content:center;gap:20px}
.p-btn{width:40px;height:40px;border-radius:50%;border:1px solid var(--border);background:rgba(var(--primary-rgb),0.04);color:#fff;font-size:16px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s}
.p-btn:active{transform:scale(.88);border-color:var(--border-glow)}
.p-btn.play{width:50px;height:50px;font-size:20px;background:linear-gradient(135deg,var(--primary),var(--deep-purple));box-shadow:0 4px 15px rgba(var(--primary-rgb),0.3)}

/* ‚ïê‚ïê‚ïê MEMORIES ‚ïê‚ïê‚ïê */
.memory-item{padding:16px;position:relative;border-left:2px solid rgba(var(--primary-rgb),0.15);margin-left:8px}
.memory-mood{font-size:22px;position:absolute;left:-14px;top:14px;background:var(--bg);padding:2px}
.memory-date{font-family:var(--font-display);font-size:8px;letter-spacing:2px;color:var(--primary);text-transform:uppercase;opacity:.6}
.memory-title{font-family:var(--font-display);font-size:10px;font-weight:600;letter-spacing:1px;color:var(--soft-pink);margin-top:4px;text-transform:uppercase}
.memory-desc{font-family:var(--font-body);font-size:13px;color:rgba(255,255,255,0.7);line-height:1.6;margin-top:6px}
.memory-by{font-family:var(--font-accent);font-size:10px;color:var(--text-muted);margin-top:6px}

/* ‚ïê‚ïê‚ïê MEMES ‚ïê‚ïê‚ïê */
.meme-item{padding:14px;text-align:center}
.meme-img{width:100%;border-radius:12px;max-height:300px;object-fit:cover;border:1px solid var(--border)}
.meme-caption{font-family:var(--font-body);font-size:13px;color:rgba(255,255,255,0.75);margin-top:8px}
.meme-footer{display:flex;align-items:center;justify-content:space-between;margin-top:8px}
.meme-meta{font-family:var(--font-accent);font-size:9px;color:var(--text-muted)}

/* ‚ïê‚ïê‚ïê GAMES ‚ïê‚ïê‚ïê */
.game-board{display:grid;grid-template-columns:repeat(4,1fr);gap:8px;padding:16px;max-width:360px;margin:0 auto}
.game-card{aspect-ratio:1;border-radius:14px;border:1px solid var(--border);background:rgba(var(--primary-rgb),0.04);display:flex;align-items:center;justify-content:center;font-size:28px;cursor:pointer;transition:all .4s;position:relative}
.game-card.flipped{background:rgba(var(--primary-rgb),0.12);border-color:rgba(var(--primary-rgb),0.25);box-shadow:0 0 15px rgba(var(--primary-rgb),0.15)}
.game-card.matched{background:rgba(74,222,128,0.1);border-color:rgba(74,222,128,0.2);box-shadow:0 0 15px rgba(74,222,128,0.1);pointer-events:none}
.game-card:active{transform:scale(.92)}
.game-card .card-face{opacity:0;transition:opacity .3s}.game-card.flipped .card-face,.game-card.matched .card-face{opacity:1}
.game-card .card-back{position:absolute;font-size:18px;opacity:.3;transition:opacity .3s}.game-card.flipped .card-back,.game-card.matched .card-back{opacity:0}
.game-header{text-align:center;padding:16px}
.game-score{font-family:var(--font-display);font-size:10px;letter-spacing:2px;color:var(--soft-pink);text-transform:uppercase}
.game-msg{font-family:var(--font-accent);font-size:14px;color:var(--primary);margin-top:6px;min-height:20px}
.game-restart{margin-top:14px}

/* ‚ïê‚ïê‚ïê RIPPLE ‚ïê‚ïê‚ïê */
.ripple{position:absolute;border-radius:50%;background:radial-gradient(circle,rgba(var(--primary-rgb),0.25),transparent 70%);transform:scale(0);animation:ripO .6s ease-out;pointer-events:none}
@keyframes ripO{to{transform:scale(4);opacity:0}}

/* ‚ïê‚ïê‚ïê SCROLLBAR ‚ïê‚ïê‚ïê */
::-webkit-scrollbar{width:2px}::-webkit-scrollbar-track{background:0 0}::-webkit-scrollbar-thumb{background:rgba(var(--primary-rgb),0.12);border-radius:10px}

/* ‚ïê‚ïê‚ïê RESPONSIVE ‚ïê‚ïê‚ïê */
@media(max-width:380px){.section-grid{gap:8px;padding:0 10px}.section-card{padding:14px 6px}.card-icon{font-size:22px}.greeting-name{font-size:12px}.tod-card{padding:22px 16px}}
</style>
</head>
<body>
<div class="aurora"><div class="aorb ao1"></div><div class="aorb ao2"></div><div class="aorb ao3"></div></div>
<div class="grid-ov"></div><div class="particles" id="ptcBg"></div>

<!-- SPLASH --><div class="page active" id="pg-splash"><div style="display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%"><div class="sp-wrap"><div class="sp-glow"></div><div class="sp-pulse"><div class="sp-ring"></div><div class="sp-ring"></div><div class="sp-ring"></div></div><div class="sp-icon">ü§´</div></div><div class="sp-brand shimmer-text">The Silent Signal</div><div class="sp-line"></div><div class="sp-sub">only for us</div><div class="sp-loader"><div class="sp-ldot"></div><div class="sp-ldot"></div><div class="sp-ldot"></div></div></div></div>

<!-- LOGIN --><div class="page" id="pg-login"><div style="flex:1;display:flex;align-items:center;justify-content:center;padding:20px"><div class="login-card glass neon-border breath-border" id="loginCard"><div class="login-icon">ü§´</div><div class="login-title shimmer-text">Silent Signal</div><div class="login-sub">enter your signal</div><div class="inp-group"><label class="inp-label">Username</label><input class="inp" type="text" id="inpUser" placeholder="username" autocomplete="off" autocapitalize="off"></div><div class="inp-group"><label class="inp-label">Password</label><input class="inp" type="password" id="inpPass" placeholder="password"></div><button class="liquid-btn" id="btnLogin" onclick="handleLogin()" style="width:100%;margin-top:8px"><span class="btn-text">Connect</span><div class="spinner"></div></button><div class="login-error" id="loginError"></div></div></div></div>

<!-- HOME --><div class="page" id="pg-home"><div class="nav-bar"><div class="nav-left"><span class="nav-icon">ü§´</span><span class="nav-title gradient-text">Silent Signal</span></div><div class="nav-right"><div class="nav-status"><span class="status-dot s-off" id="statusDot"></span><span id="statusText">...</span></div><div class="nav-avatar" id="navAvatar" onclick="handleLogout()">üë§</div></div></div><div class="home-scroll">
<div class="greeting-banner glass neon-border"><span class="greet-emoji" id="greetEmoji">üåô</span><div class="greeting-name" id="greetName"></div><div class="greeting-date" id="greetDate"></div><div class="greeting-tagline" id="greetTagline"></div></div>
<div class="quick-row"><div class="quick-btn" onclick="nav('pg-chat')">üí¨ chat</div><div class="quick-btn" onclick="nav('pg-letters')">üíå letter</div><div class="quick-btn" onclick="nav('pg-confess')">ü§´ confess</div><div class="quick-btn" onclick="nav('pg-tod')">üéØ T&D</div><div class="quick-btn" onclick="nav('pg-music')">üéµ music</div></div>
<div class="section-label">‚ú¶ our space</div>
<div class="section-grid">
<div class="section-card" onclick="nav('pg-chat')"><span class="card-icon">üí¨</span><span class="card-name">Chat</span><span class="card-sub">talk</span><span class="unread-badge" id="chatBadge" style="display:none">0</span></div>
<div class="section-card" onclick="nav('pg-music')"><span class="card-icon">üéµ</span><span class="card-name">Music</span><span class="card-sub">listen</span></div>
<div class="section-card" onclick="nav('pg-memories')"><span class="card-icon">üì∏</span><span class="card-name">Memories</span><span class="card-sub">moments</span></div>
<div class="section-card" onclick="nav('pg-memes')"><span class="card-icon">üòÇ</span><span class="card-name">Memes</span><span class="card-sub">laugh</span></div>
<div class="section-card" onclick="nav('pg-games')"><span class="card-icon">üÉè</span><span class="card-name">Games</span><span class="card-sub">play</span></div>
<div class="section-card" onclick="nav('pg-tod')"><span class="card-icon">üéØ</span><span class="card-name">T&D</span><span class="card-sub">brave?</span></div>
<div class="section-card" onclick="nav('pg-letters')"><span class="card-icon">üíå</span><span class="card-name">Letters</span><span class="card-sub">heart</span><span class="unread-badge" id="letterBadge" style="display:none">0</span></div>
<div class="section-card" onclick="nav('pg-confess')"><span class="card-icon">ü§´</span><span class="card-name">Confess</span><span class="card-sub">freely</span></div>
<div class="section-card" onclick="nav('pg-quotes')"><span class="card-icon">üí≠</span><span class="card-name">Quotes</span><span class="card-sub">words</span></div>
</div>
<div class="sync-section glass neon-border"><div class="sync-header"><span class="sync-label gradient-text">‚ô° Sync</span><span class="sync-pct" id="syncPct">0%</span></div><div class="sync-bar-bg"><div class="sync-bar" id="syncBar" style="width:0%"></div></div></div>
<div class="quote-section glass"><div class="quote-text" id="dailyQuote"></div></div>
<div class="home-ft">‚ô° our secret place ‚ô°</div></div></div>

<!-- CHAT --><div class="page" id="pg-chat"><div class="chat-header"><button class="btn-back" onclick="leaveChat()">‚Üê</button><div class="chat-hdr-info"><div class="chat-hdr-name" id="chatName"></div><div class="chat-hdr-status"><span class="status-dot s-off" id="chatStatusDot"></span><span id="chatStatusText">offline</span></div></div><div class="chat-hdr-avatar" id="chatAvatar">üë∏</div></div><div class="chat-msgs" id="chatMsgs"></div><div class="typing-wrap" id="typingWrap"><div class="typing-dots"><span></span><span></span><span></span></div><span class="typing-label">typing...</span></div><div class="chat-input-area"><div style="flex:1"><input type="text" class="chat-inp" id="chatInp" placeholder="type a message..." autocomplete="off"></div><button class="chat-send disabled" id="chatSend" onclick="sendMsg()">‚û§</button></div></div>

<!-- LETTERS --><div class="page" id="pg-letters"><div class="pg-header"><button class="btn-back" onclick="goBack()">‚Üê</button><span class="pg-title gradient-text">üíå Letters</span><button class="pg-header-btn" onclick="showWriteLetter()">‚úç Write</button></div><div class="letters-tabs"><div class="l-tab active" id="ltabIn" onclick="switchLTab('inbox')">üì• Inbox</div><div class="l-tab" id="ltabSent" onclick="switchLTab('sent')">üì§ Sent</div></div><div class="pg-body"><div class="letter-list" id="letterList"></div></div></div>

<!-- WRITE LETTER --><div class="page" id="pg-wl"><div class="pg-header"><button class="btn-back" onclick="goBack()">‚Üê</button><span class="pg-title gradient-text">‚úç Letter</span></div><div class="pg-body"><div style="padding:4px"><div class="write-section"><span class="write-label">Mood</span><div class="mood-picker" id="lMoods"></div></div><div class="write-section"><span class="write-label">Title</span><input class="inp" type="text" id="lTitle" placeholder="title..." autocomplete="off"></div><div class="write-section"><span class="write-label">Letter</span><textarea class="inp" id="lContent" placeholder="write from your heart..." style="min-height:160px"></textarea></div><button class="liquid-btn" style="width:100%" id="btnSL" onclick="sendLetter()"><span class="btn-text">üíå Send</span><div class="spinner"></div></button></div></div></div>

<!-- READ LETTER --><div class="page" id="pg-rl"><div class="pg-header"><button class="btn-back" onclick="goBack()">‚Üê</button><span class="pg-title gradient-text">üíå</span></div><div class="pg-body"><div class="read-letter" id="rlBody"></div></div></div>

<!-- CONFESSIONS --><div class="page" id="pg-confess"><div class="pg-header"><button class="btn-back" onclick="goBack()">‚Üê</button><span class="pg-title gradient-text">ü§´ Confessions</span><button class="pg-header-btn" onclick="showWC()">‚úç Write</button></div><div class="pg-body"><div class="conf-list" id="confList"></div></div></div>

<!-- WRITE CONF --><div class="page" id="pg-wc"><div class="pg-header"><button class="btn-back" onclick="goBack()">‚Üê</button><span class="pg-title gradient-text">‚úç Confess</span></div><div class="pg-body"><div style="padding:4px"><div class="write-section"><span class="write-label">Mood</span><div class="mood-picker" id="cMoods"></div></div><div class="write-section"><span class="write-label">Confession</span><textarea class="inp" id="cContent" placeholder="say what's in your heart..." style="min-height:160px"></textarea></div><button class="liquid-btn" style="width:100%" id="btnPC" onclick="postConf()"><span class="btn-text">ü§´ Post</span><div class="spinner"></div></button></div></div></div>

<!-- T&D --><div class="page" id="pg-tod"><div class="pg-header"><button class="btn-back" onclick="goBack()">‚Üê</button><span class="pg-title gradient-text">üéØ Truth & Dare</span></div><div class="pg-body"><div class="tod-wrap"><div class="tod-card glass neon-border" id="todCard"><div class="tod-emoji" id="todEmoji">üéØ</div><div class="tod-type" id="todType">Ready?</div><div class="tod-question" id="todQ">Choose Truth, Dare, or Random!</div><div class="tod-category" id="todCat"></div></div><div class="tod-btns"><button class="tod-btn truth-btn" onclick="getTod('truth')">üü¢ Truth</button><button class="tod-btn random-btn" onclick="getTod('random')">üé≤ Random</button><button class="tod-btn dare-btn" onclick="getTod('dare')">üî¥ Dare</button></div></div></div></div>

<!-- QUOTES --><div class="page" id="pg-quotes"><div class="pg-header"><button class="btn-back" onclick="goBack()">‚Üê</button><span class="pg-title gradient-text">üí≠ Quotes</span><button class="pg-header-btn" onclick="nav('pg-aq')">+ Add</button></div><div class="pg-body"><div class="quotes-list" id="quotesList"></div></div></div>

<!-- ADD QUOTE --><div class="page" id="pg-aq"><div class="pg-header"><button class="btn-back" onclick="goBack()">‚Üê</button><span class="pg-title gradient-text">üí≠ Add</span></div><div class="pg-body"><div style="padding:4px"><div class="write-section"><span class="write-label">Quote</span><textarea class="inp" id="aqText" placeholder="a beautiful quote..." style="min-height:100px"></textarea></div><div class="write-section"><span class="write-label">Author</span><input class="inp" type="text" id="aqAuth" placeholder="optional" autocomplete="off"></div><button class="liquid-btn" style="width:100%" id="btnAQ" onclick="addQuote()"><span class="btn-text">üí≠ Add</span><div class="spinner"></div></button></div></div></div>

<!-- MUSIC --><div class="page" id="pg-music"><div class="pg-header"><button class="btn-back" onclick="goBack()">‚Üê</button><span class="pg-title gradient-text">üéµ Music</span><button class="pg-header-btn" onclick="nav('pg-as')">+ Add</button></div><div style="flex:1;overflow-y:auto;-webkit-overflow-scrolling:touch"><div class="song-list" id="songList"></div></div><div class="music-player" id="musicPlayer" style="display:none"><div class="player-info"><div class="player-title" id="pTitle">No song</div></div><div class="player-controls"><button class="p-btn" onclick="prevSong()">‚èÆ</button><button class="p-btn play" id="pPlayBtn" onclick="togglePlay()">‚ñ∂</button><button class="p-btn" onclick="nextSong()">‚è≠</button></div><audio id="audioEl"></audio></div></div>

<!-- ADD SONG --><div class="page" id="pg-as"><div class="pg-header"><button class="btn-back" onclick="goBack()">‚Üê</button><span class="pg-title gradient-text">üéµ Add Song</span></div><div class="pg-body"><div style="padding:4px"><div class="write-section"><span class="write-label">Song Title</span><input class="inp" type="text" id="asTitle" placeholder="song name" autocomplete="off"></div><div class="write-section"><span class="write-label">Artist</span><input class="inp" type="text" id="asArtist" placeholder="artist name" autocomplete="off"></div><div class="write-section"><span class="write-label">Audio URL (mp3 link)</span><input class="inp" type="url" id="asUrl" placeholder="https://...mp3" autocomplete="off"></div><button class="liquid-btn" style="width:100%" id="btnAS" onclick="addSong()"><span class="btn-text">üéµ Add</span><div class="spinner"></div></button></div></div></div>

<!-- MEMORIES --><div class="page" id="pg-memories"><div class="pg-header"><button class="btn-back" onclick="goBack()">‚Üê</button><span class="pg-title gradient-text">üì∏ Memories</span><button class="pg-header-btn" onclick="nav('pg-am')">+ Add</button></div><div class="pg-body"><div class="memory-list" id="memoryList"></div></div></div>

<!-- ADD MEMORY --><div class="page" id="pg-am"><div class="pg-header"><button class="btn-back" onclick="goBack()">‚Üê</button><span class="pg-title gradient-text">üì∏ Add Memory</span></div><div class="pg-body"><div style="padding:4px"><div class="write-section"><span class="write-label">Mood</span><div class="mood-picker" id="mMoods"></div></div><div class="write-section"><span class="write-label">Date</span><input class="inp" type="date" id="amDate"></div><div class="write-section"><span class="write-label">Title</span><input class="inp" type="text" id="amTitle" placeholder="what happened?" autocomplete="off"></div><div class="write-section"><span class="write-label">Description</span><textarea class="inp" id="amDesc" placeholder="describe the moment..." style="min-height:120px"></textarea></div><button class="liquid-btn" style="width:100%" id="btnAM" onclick="addMemory()"><span class="btn-text">üì∏ Save</span><div class="spinner"></div></button></div></div></div>

<!-- MEMES --><div class="page" id="pg-memes"><div class="pg-header"><button class="btn-back" onclick="goBack()">‚Üê</button><span class="pg-title gradient-text">üòÇ Memes</span><button class="pg-header-btn" onclick="nav('pg-amm')">+ Add</button></div><div class="pg-body"><div class="meme-list" id="memeList"></div></div></div>

<!-- ADD MEME --><div class="page" id="pg-amm"><div class="pg-header"><button class="btn-back" onclick="goBack()">‚Üê</button><span class="pg-title gradient-text">üòÇ Add Meme</span></div><div class="pg-body"><div style="padding:4px"><div class="write-section"><span class="write-label">Image URL</span><input class="inp" type="url" id="ammUrl" placeholder="paste image link..." autocomplete="off"></div><div class="write-section"><span class="write-label">Caption</span><input class="inp" type="text" id="ammCap" placeholder="optional caption" autocomplete="off"></div><button class="liquid-btn" style="width:100%" id="btnAMM" onclick="addMeme()"><span class="btn-text">üòÇ Post</span><div class="spinner"></div></button></div></div></div>

<!-- GAMES --><div class="page" id="pg-games"><div class="pg-header"><button class="btn-back" onclick="goBack()">‚Üê</button><span class="pg-title gradient-text">üÉè Memory Game</span></div><div class="pg-body"><div class="game-header"><div class="game-score" id="gameScore">Moves: 0 | Matched: 0/8</div><div class="game-msg" id="gameMsg"></div><button class="liquid-btn game-restart" onclick="initGame()" style="padding:10px 20px;font-size:9px"><span class="btn-text">üîÑ New Game</span></button></div><div class="game-board" id="gameBoard"></div></div></div>

<script src="/socket.io/socket.io.js"></script>
<script>
var socket=null,CU=null,CP='pg-splash',PH=[];
var chatMsgs=[],chatLoaded=0,typTimer=null,partnerOn=0;
var lTab='inbox',selLM='üíï',selCM='üí≠',selMM='üíï';
var songs=[],curSongIdx=-1,isPlaying=0;
var gameCards=[],flipped=[],matched=[],gameMoves=0,gameLock=0;

var D=['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'];
var M=['January','February','March','April','May','June','July','August','September','October','November','December'];
var HQ=["Every love story is beautiful, but ours is my favorite","Some hearts understand each other even in silence","I choose you over and over","You are my today and all of my tomorrows","Together is my favorite place to be"];
var moods=['üíï','‚ù§Ô∏è','ü•∞','üî•','üåô','üíå','ü§´','üòò','üíã','ü¶ã','‚ú®','üí´'];

var truths=[{q:"What's one thing you've never told me?",c:"Deep"},{q:"What was your first impression of me?",c:"Memory"},{q:"What's your favorite memory of us?",c:"Memory"},{q:"What do you love most about me?",c:"Love"},{q:"Have you ever dreamed about me?",c:"Dreams"},{q:"What song reminds you of us?",c:"Music"},{q:"What small thing I do makes you happy?",c:"Little Things"},{q:"If you could relive one moment with me?",c:"Memory"},{q:"What were you thinking in our first talk?",c:"Memory"},{q:"What's your favorite thing about my personality?",c:"Love"},{q:"What do you want us to do someday?",c:"Dreams"},{q:"When did you first realize your feelings?",c:"Love"},{q:"Most romantic thing you've imagined us doing?",c:"Dreams"},{q:"What makes us special as a couple?",c:"Love"},{q:"Written something about me you didn't share?",c:"Secret"},{q:"One fear you have about us?",c:"Deep"},{q:"Sweetest thing I've ever said to you?",c:"Memory"},{q:"Rate our first date 1-10?",c:"Memory"},{q:"What do you miss when we're apart?",c:"Love"},{q:"What nickname do you want me to call you?",c:"Flirty"},{q:"What always makes you smile about me?",c:"Love"},{q:"If we had a movie, what's the title?",c:"Fun"},{q:"My physical feature you find most attractive?",c:"Flirty"},{q:"Something you pretend not to notice but love?",c:"Little Things"},{q:"Describe your feelings in 3 words?",c:"Deep"}];
var dares=[{q:"Send me the most romantic text right now",c:"Romantic"},{q:"Say 3 things you love about me",c:"Love"},{q:"Write me a 4-line poem right now",c:"Creative"},{q:"Send your favorite photo of us with caption",c:"Memory"},{q:"Tell me something you've been holding back",c:"Deep"},{q:"Send a song that describes your feelings",c:"Music"},{q:"Give me 5 compliments without stopping",c:"Love"},{q:"Describe our perfect date in detail",c:"Dreams"},{q:"Write goodnight as if it's our last night",c:"Romantic"},{q:"Make up a love story about us in 5 lines",c:"Creative"},{q:"Write 'I love you' in 3 creative ways",c:"Creative"},{q:"Describe me without using my name",c:"Love"},{q:"Plan our next date, every detail",c:"Dreams"},{q:"Send the last photo in your gallery",c:"Fun"},{q:"Write a short love letter in chat now",c:"Romantic"},{q:"Tell me top 3 moments with me",c:"Memory"},{q:"Describe feelings using only emojis",c:"Fun"},{q:"Give me a new nickname for a week",c:"Flirty"},{q:"Confess something sweet in confession room",c:"Romantic"},{q:"Tell me which outfit of mine you like most",c:"Flirty"},{q:"Describe your dream future with me",c:"Dreams"},{q:"Say the cheesiest pickup line",c:"Fun"},{q:"Record how you say my name",c:"Romantic"},{q:"Share your lock screen",c:"Bold"},{q:"Sing our song via voice note",c:"Bold"}];

function nav(id,an,ah){an=an||'anim-slide';if(ah!==false)ah=true;if(CP===id)return;var o=document.getElementById(CP),p=document.getElementById(id);if(!p)return;if(ah)PH.push(CP);o.classList.remove('active','anim-slide','anim-fade','anim-scale');p.className='page active '+an;CP=id;if(id==='pg-chat')openChat();if(id==='pg-letters')loadLetters();if(id==='pg-confess')loadConf();if(id==='pg-quotes')loadQuotes();if(id==='pg-music')loadSongs();if(id==='pg-memories')loadMemories();if(id==='pg-memes')loadMemes();if(id==='pg-games')initGame()}
function goBack(){if(!PH.length)return;var p=PH.pop(),o=document.getElementById(CP),n=document.getElementById(p);o.classList.remove('active','anim-slide','anim-fade','anim-scale');n.className='page active anim-fade';CP=p}

async function handleLogin(){var b=document.getElementById('btnLogin'),e=document.getElementById('loginError'),u=document.getElementById('inpUser').value.trim(),p=document.getElementById('inpPass').value.trim();e.textContent='';if(!u||!p){e.textContent='‚ö† enter both fields';shk();return}b.classList.add('loading');try{var r=await(await fetch('/api/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({username:u,password:p})})).json();b.classList.remove('loading');if(r.success){CU=r.user;localStorage.setItem('tss_user',JSON.stringify(CU));setupHome();connectSocket();nav('pg-home','anim-scale')}else{e.textContent='‚úï '+r.message;shk()}}catch(x){b.classList.remove('loading');e.textContent='‚ö† signal lost...';shk()}}
function shk(){var c=document.getElementById('loginCard');c.classList.add('shake');setTimeout(function(){c.classList.remove('shake')},500)}
document.addEventListener('keydown',function(e){if(e.key==='Enter'&&CP==='pg-login')handleLogin()});
function handleLogout(){if(confirm('Disconnect?')){localStorage.removeItem('tss_user');CU=null;chatMsgs=[];chatLoaded=0;if(socket){socket.disconnect();socket=null}PH=[];nav('pg-login','anim-fade',false)}}

function setupHome(){if(!CU)return;var n=new Date(),h=n.getHours(),g='Good Evening',e='üåÜ';if(h<5){g='Sweet Dreams';e='üåô'}else if(h<12){g='Good Morning';e='üåÖ'}else if(h<17){g='Good Afternoon';e='‚òÄÔ∏è'}else if(h<21){g='Good Evening';e='üåÜ'}else{g='Good Night';e='üåô'}
document.getElementById('greetEmoji').textContent=e;document.getElementById('greetName').innerHTML=g+', <span>'+CU.displayName+'</span>';document.getElementById('greetDate').textContent=D[n.getDay()]+', '+n.getDate()+' '+M[n.getMonth()];document.getElementById('greetTagline').textContent='"'+HQ[Math.floor(Math.random()*HQ.length)]+'"';document.getElementById('navAvatar').textContent=CU.username==='cavity'?'ü§¥':'üë∏';document.getElementById('dailyQuote').textContent='‚ú¶ "'+HQ[Math.floor(Math.random()*HQ.length)]+'" ‚ú¶';
setTimeout(function(){var p=Math.floor(Math.random()*12)+88;document.getElementById('syncPct').textContent=p+'%';document.getElementById('syncBar').style.width=p+'%'},800);
checkUnread();checkLU();initMP('lMoods','l');initMP('cMoods','c');initMP('mMoods','m')}

function connectSocket(){if(socket)return;socket=io();socket.on('connect',function(){if(CU)socket.emit('user-online',CU.username)});
socket.on('online-status',function(u){partnerOn=u.indexOf(getP())!==-1;document.getElementById('statusDot').className='status-dot '+(partnerOn?'s-on':'s-off');document.getElementById('statusText').textContent=partnerOn?'online':'away';var d=document.getElementById('chatStatusDot');if(d){d.className='status-dot '+(partnerOn?'s-on':'s-off');document.getElementById('chatStatusText').textContent=partnerOn?'online':'offline'}});
socket.on('receive-message',function(m){chatMsgs.push(m);if(CP==='pg-chat'){appendMsg(m);scrollC();markRead()}else{checkUnread();playN()}});
socket.on('message-sent',function(m){chatMsgs.push(m);if(CP==='pg-chat'){appendMsg(m);scrollC()}});
socket.on('partner-typing',function(v){var e=document.getElementById('typingWrap');if(v){e.classList.add('show');scrollC()}else e.classList.remove('show')});
socket.on('partner-read',function(){document.querySelectorAll('.msg-check').forEach(function(c){c.classList.add('read')})});
socket.on('new-letter',function(){if(CP!=='pg-letters')checkLU();else loadLetters();playN()});
socket.on('new-confession',function(){if(CP==='pg-confess')loadConf()});
socket.on('new-meme',function(){if(CP==='pg-memes')loadMemes()});
socket.on('new-memory',function(){if(CP==='pg-memories')loadMemories()});
socket.on('new-song',function(){if(CP==='pg-music')loadSongs()})}

function getP(){return CU.username==='cavity'?'cingam':'cavity'}
function getPN(){return getP()==='cavity'?'Cavity':'Cingam'}

// CHAT
function openChat(){document.getElementById('chatName').textContent=getPN();document.getElementById('chatAvatar').textContent=getP()==='cavity'?'ü§¥':'üë∏';document.getElementById('chatStatusDot').className='status-dot '+(partnerOn?'s-on':'s-off');document.getElementById('chatStatusText').textContent=partnerOn?'online':'offline';if(!chatLoaded)loadCH();else{renderC();markRead()}var i=document.getElementById('chatInp');i.value='';i.oninput=hTyp;i.onkeydown=function(e){if(e.key==='Enter')sendMsg()};uSB()}
function leaveChat(){if(socket)socket.emit('stop-typing',{receiver:getP()});goBack()}
async function loadCH(){var c=document.getElementById('chatMsgs');c.innerHTML=ldHTML();try{var d=await(await fetch('/api/messages')).json();if(d.success){chatMsgs=d.messages;chatLoaded=1;renderC();markRead()}}catch(e){}}
function renderC(){var c=document.getElementById('chatMsgs');c.innerHTML='';if(!chatMsgs.length){c.innerHTML='<div class="chat-empty"><div class="chat-empty-icon">üí¨</div><div class="chat-empty-text">No messages yet</div></div>';return}var ld='';chatMsgs.forEach(function(m){var d=new Date(m.timestamp),ds=fD(d);if(ds!==ld){addDS(c,ds);ld=ds}addME(c,m,0)});scrollC()}
function appendMsg(m){var c=document.getElementById('chatMsgs');var e=c.querySelector('.chat-empty');if(e)e.remove();var d=new Date(m.timestamp),ds=fD(d);var s=c.querySelectorAll('.msg-date-sep');var l=s.length?s[s.length-1].textContent.trim():'';if(ds!==l)addDS(c,ds);addME(c,m,1)}
function addDS(c,s){var e=document.createElement('div');e.className='msg-date-sep';e.innerHTML='<span>'+s+'</span>';c.appendChild(e)}
function addME(c,m,a){var s=m.sender===CU.username;var r=document.createElement('div');r.className='msg-row '+(s?'sent':'received');if(!a)r.style.animation='none';var t=new Date(m.timestamp);r.innerHTML='<div class="msg-bubble"><div class="msg-text">'+esc(m.message)+'</div><div class="msg-time">'+pad(t.getHours())+':'+pad(t.getMinutes())+' '+(s?'<span class="msg-check'+(m.read?' read':'')+'">‚úì‚úì</span>':'')+'</div></div>';c.appendChild(r)}
function scrollC(){var c=document.getElementById('chatMsgs');setTimeout(function(){c.scrollTop=c.scrollHeight},50)}
function sendMsg(){var i=document.getElementById('chatInp'),t=i.value.trim();if(!t||!socket)return;socket.emit('send-message',{sender:CU.username,receiver:getP(),message:t});i.value='';uSB();socket.emit('stop-typing',{receiver:getP()})}
function hTyp(){uSB();if(!socket)return;socket.emit('typing',{receiver:getP()});clearTimeout(typTimer);typTimer=setTimeout(function(){socket.emit('stop-typing',{receiver:getP()})},2000)}
function uSB(){var b=document.getElementById('chatSend');document.getElementById('chatInp').value.trim()?b.classList.remove('disabled'):b.classList.add('disabled')}
async function markRead(){try{await fetch('/api/messages/read',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({username:CU.username})});if(socket)socket.emit('messages-read',{sender:getP()});uBadge('chatBadge',0)}catch(e){}}
async function checkUnread(){try{var d=await(await fetch('/api/unread/'+CU.username)).json();if(d.success)uBadge('chatBadge',d.count)}catch(e){}}

// LETTERS
function showWriteLetter(){nav('pg-wl');selLM='üíï';hMood('lMoods','üíï')}
async function loadLetters(){var l=document.getElementById('letterList');l.innerHTML=ldHTML();try{var d=await(await fetch('/api/letters/'+CU.username)).json();if(d.success){var f=d.letters.filter(function(x){return lTab==='inbox'?x.receiver===CU.username:x.sender===CU.username});l.innerHTML='';if(!f.length){l.innerHTML='<div class="letter-empty"><span class="letter-empty-icon">üíå</span><div class="letter-empty-text">No letters</div></div>';return}f.forEach(function(x,i){var e=document.createElement('div');e.className='glass letter-item'+(x.read?'':' unread');e.style.animationDelay=(i*.05)+'s';e.innerHTML='<span class="letter-mood">'+x.mood+'</span><div class="letter-title">'+esc(x.title||'Untitled')+'</div><div class="letter-preview">'+esc(x.content)+'</div><div class="letter-meta">'+(lTab==='inbox'?'from '+x.sender:'to '+x.receiver)+' ¬∑ '+tAgo(x.timestamp)+'</div>'+(lTab==='inbox'&&!x.read?'<div class="letter-new-dot"></div>':'');e.onclick=function(){openL(x)};l.appendChild(e)})}}catch(e){}}
function switchLTab(t){lTab=t;document.getElementById('ltabIn').classList.toggle('active',t==='inbox');document.getElementById('ltabSent').classList.toggle('active',t==='sent');loadLetters()}
function openL(l){nav('pg-rl');document.getElementById('rlBody').innerHTML='<span class="read-letter-mood">'+l.mood+'</span><div class="read-letter-title">'+esc(l.title||'Untitled')+'</div><div class="read-letter-from">'+(l.sender===CU.username?'by you':'from '+l.sender)+' ¬∑ '+fDT(l.timestamp)+'</div><div class="read-letter-content glass">'+esc(l.content)+'</div>';if(!l.read&&l.receiver===CU.username)fetch('/api/letters/open',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({id:l._id})})}
async function sendLetter(){var b=document.getElementById('btnSL'),c=document.getElementById('lContent').value.trim();if(!c){alert('Write something!');return}b.classList.add('loading');try{var d=await(await fetch('/api/letters',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({sender:CU.username,receiver:getP(),title:document.getElementById('lTitle').value.trim()||'Untitled Letter',content:c,mood:selLM})})).json();b.classList.remove('loading');if(d.success){if(socket)socket.emit('letter-sent',{receiver:getP()});document.getElementById('lTitle').value='';document.getElementById('lContent').value='';goBack()}}catch(e){b.classList.remove('loading')}}
async function checkLU(){try{var d=await(await fetch('/api/letters/unread/'+CU.username)).json();if(d.success)uBadge('letterBadge',d.count)}catch(e){}}

// CONFESSIONS
function showWC(){nav('pg-wc');selCM='üí≠';hMood('cMoods','üí≠')}
async function loadConf(){var l=document.getElementById('confList');l.innerHTML=ldHTML();try{var d=await(await fetch('/api/confessions')).json();if(d.success){l.innerHTML='';if(!d.confessions.length){l.innerHTML='<div class="letter-empty"><span class="letter-empty-icon">ü§´</span><div class="letter-empty-text">No confessions</div></div>';return}d.confessions.forEach(function(c,i){var e=document.createElement('div');e.className='glass conf-item';e.style.animationDelay=(i*.05)+'s';var h=c.heartedBy&&c.heartedBy.indexOf(CU.username)!==-1;e.innerHTML='<span class="conf-mood">'+c.mood+'</span><div class="conf-content">'+esc(c.content)+'</div><div class="conf-footer"><span class="conf-meta">'+c.author+' ¬∑ '+tAgo(c.timestamp)+'</span><button class="heart-btn'+(h?' hearted':'')+'" onclick="hConf(\''+c._id+'\',this)">‚ô° <span>'+c.hearts+'</span></button></div>';l.appendChild(e)})}}catch(e){}}
async function postConf(){var b=document.getElementById('btnPC'),c=document.getElementById('cContent').value.trim();if(!c){alert('Write something!');return}b.classList.add('loading');try{var d=await(await fetch('/api/confessions',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({author:CU.displayName,content:c,mood:selCM})})).json();b.classList.remove('loading');if(d.success){if(socket)socket.emit('confession-posted');document.getElementById('cContent').value='';goBack()}}catch(e){b.classList.remove('loading')}}
async function hConf(id,b){try{var d=await(await fetch('/api/confessions/heart',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({id:id,username:CU.username})})).json();if(d.success){b.querySelector('span').textContent=d.hearts;b.classList.toggle('hearted',d.hearted)}}catch(e){}}

// T&D
function getTod(t){var c=document.getElementById('todCard');c.classList.remove('tod-flip');void c.offsetWidth;c.classList.add('tod-flip');var iT=t==='truth'||(t==='random'&&Math.random()>.5);var pool=iT?truths:dares,item=pool[Math.floor(Math.random()*pool.length)];setTimeout(function(){document.getElementById('todEmoji').textContent=iT?'üü¢':'üî¥';document.getElementById('todType').textContent=iT?'Truth':'Dare';document.getElementById('todType').className='tod-type '+(iT?'truth':'dare');document.getElementById('todQ').textContent=item.q;document.getElementById('todCat').textContent='‚åò '+item.c},250)}

// QUOTES
async function loadQuotes(){var l=document.getElementById('quotesList');l.innerHTML=ldHTML();try{var d=await(await fetch('/api/quotes')).json();if(d.success){l.innerHTML='';d.quotes.forEach(function(q,i){var h=q.heartedBy&&q.heartedBy.indexOf(CU.username)!==-1;var e=document.createElement('div');e.className='glass qt-item';e.style.animationDelay=(i*.04)+'s';e.innerHTML='<span class="qt-mark">"</span><div class="qt-text">'+esc(q.quote)+'</div>'+(q.author?'<div class="qt-author">‚Äî '+esc(q.author)+'</div>':'')+'<div class="qt-footer">'+(q.addedBy!=='system'?'<span class="qt-added">by '+q.addedBy+'</span>':'<span></span>')+'<button class="heart-btn'+(h?' hearted':'')+'" onclick="hQt(\''+q._id+'\',this)">‚ô° <span>'+q.hearts+'</span></button></div>';l.appendChild(e)})}}catch(e){}}
async function addQuote(){var b=document.getElementById('btnAQ'),t=document.getElementById('aqText').value.trim();if(!t){alert('Write a quote!');return}b.classList.add('loading');try{await fetch('/api/quotes',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({addedBy:CU.displayName,quote:t,author:document.getElementById('aqAuth').value.trim()})});b.classList.remove('loading');document.getElementById('aqText').value='';document.getElementById('aqAuth').value='';goBack()}catch(e){b.classList.remove('loading')}}
async function hQt(id,b){try{var d=await(await fetch('/api/quotes/heart',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({id:id,username:CU.username})})).json();if(d.success){b.querySelector('span').textContent=d.hearts;b.classList.toggle('hearted',d.hearted)}}catch(e){}}

// MUSIC
async function loadSongs(){var l=document.getElementById('songList');l.innerHTML=ldHTML();try{var d=await(await fetch('/api/songs')).json();if(d.success){songs=d.songs;l.innerHTML='';if(!songs.length){l.innerHTML='<div class="letter-empty"><span class="letter-empty-icon">üéµ</span><div class="letter-empty-text">No songs yet</div></div>';document.getElementById('musicPlayer').style.display='none';return}document.getElementById('musicPlayer').style.display='block';songs.forEach(function(s,i){var e=document.createElement('div');e.className='glass song-item';e.style.animationDelay=(i*.04)+'s';e.innerHTML='<span class="song-icon">üéµ</span><div class="song-info"><div class="song-title">'+esc(s.title)+'</div><div class="song-artist">'+(s.artist?esc(s.artist):'Unknown')+'</div></div><button class="song-del" onclick="event.stopPropagation();delSong(\''+s._id+'\')">‚úï</button>';e.onclick=function(){playSong(i)};l.appendChild(e)})}}catch(e){}}
async function addSong(){var b=document.getElementById('btnAS'),t=document.getElementById('asTitle').value.trim(),u=document.getElementById('asUrl').value.trim();if(!t||!u){alert('Title and URL required!');return}b.classList.add('loading');try{await fetch('/api/songs',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({title:t,artist:document.getElementById('asArtist').value.trim(),url:u,addedBy:CU.username})});b.classList.remove('loading');document.getElementById('asTitle').value='';document.getElementById('asArtist').value='';document.getElementById('asUrl').value='';if(socket)socket.emit('song-added');goBack()}catch(e){b.classList.remove('loading')}}
async function delSong(id){if(!confirm('Delete song?'))return;try{await fetch('/api/songs/'+id,{method:'DELETE'});loadSongs()}catch(e){}}
function playSong(i){curSongIdx=i;var s=songs[i];document.getElementById('pTitle').textContent=s.title;var a=document.getElementById('audioEl');a.src=s.url;a.play();isPlaying=1;document.getElementById('pPlayBtn').textContent='‚è∏'}
function togglePlay(){var a=document.getElementById('audioEl');if(isPlaying){a.pause();isPlaying=0;document.getElementById('pPlayBtn').textContent='‚ñ∂'}else{a.play();isPlaying=1;document.getElementById('pPlayBtn').textContent='‚è∏'}}
function nextSong(){if(!songs.length)return;curSongIdx=(curSongIdx+1)%songs.length;playSong(curSongIdx)}
function prevSong(){if(!songs.length)return;curSongIdx=(curSongIdx-1+songs.length)%songs.length;playSong(curSongIdx)}

// MEMORIES
async function loadMemories(){var l=document.getElementById('memoryList');l.innerHTML=ldHTML();try{var d=await(await fetch('/api/memories')).json();if(d.success){l.innerHTML='';if(!d.memories.length){l.innerHTML='<div class="letter-empty"><span class="letter-empty-icon">üì∏</span><div class="letter-empty-text">No memories yet</div></div>';return}d.memories.forEach(function(m,i){var e=document.createElement('div');e.className='glass memory-item';e.style.animationDelay=(i*.05)+'s';e.innerHTML='<span class="memory-mood">'+m.mood+'</span><div class="memory-date">'+m.date+'</div><div class="memory-title">'+esc(m.title)+'</div><div class="memory-desc">'+esc(m.description)+'</div><div class="memory-by">by '+m.addedBy+'</div>';l.appendChild(e)})}}catch(e){}}
async function addMemory(){var b=document.getElementById('btnAM'),t=document.getElementById('amTitle').value.trim(),d=document.getElementById('amDesc').value.trim(),dt=document.getElementById('amDate').value;if(!t||!d){alert('Fill title and description!');return}b.classList.add('loading');try{await fetch('/api/memories',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({title:t,description:d,date:dt||new Date().toISOString().split('T')[0],mood:selMM,addedBy:CU.displayName})});b.classList.remove('loading');document.getElementById('amTitle').value='';document.getElementById('amDesc').value='';if(socket)socket.emit('memory-posted');goBack()}catch(e){b.classList.remove('loading')}}

// MEMES
async function loadMemes(){var l=document.getElementById('memeList');l.innerHTML=ldHTML();try{var d=await(await fetch('/api/memes')).json();if(d.success){l.innerHTML='';if(!d.memes.length){l.innerHTML='<div class="letter-empty"><span class="letter-empty-icon">üòÇ</span><div class="letter-empty-text">No memes yet</div></div>';return}d.memes.forEach(function(m,i){var h=m.heartedBy&&m.heartedBy.indexOf(CU.username)!==-1;var e=document.createElement('div');e.className='glass meme-item';e.style.animationDelay=(i*.04)+'s';e.innerHTML='<img class="meme-img" src="'+esc(m.imageUrl)+'" onerror="this.style.display=\'none\'" loading="lazy">'+(m.caption?'<div class="meme-caption">'+esc(m.caption)+'</div>':'')+'<div class="meme-footer"><span class="meme-meta">'+m.addedBy+' ¬∑ '+tAgo(m.timestamp)+'</span><button class="heart-btn'+(h?' hearted':'')+'" onclick="hMeme(\''+m._id+'\',this)">‚ô° <span>'+m.hearts+'</span></button></div>';l.appendChild(e)})}}catch(e){}}
async function addMeme(){var b=document.getElementById('btnAMM'),u=document.getElementById('ammUrl').value.trim();if(!u){alert('Paste image URL!');return}b.classList.add('loading');try{await fetch('/api/memes',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({imageUrl:u,caption:document.getElementById('ammCap').value.trim(),addedBy:CU.displayName})});b.classList.remove('loading');document.getElementById('ammUrl').value='';document.getElementById('ammCap').value='';if(socket)socket.emit('meme-posted');goBack()}catch(e){b.classList.remove('loading')}}
async function hMeme(id,b){try{var d=await(await fetch('/api/memes/heart',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({id:id,username:CU.username})})).json();if(d.success){b.querySelector('span').textContent=d.hearts;b.classList.toggle('hearted',d.hearted)}}catch(e){}}

// GAMES
function initGame(){var emojis=['üíï','üíñ','ü¶ã','üåπ','üí´','‚ú®','üî•','üíã'];var deck=emojis.concat(emojis);deck.sort(function(){return Math.random()-0.5});gameCards=deck;flipped=[];matched=[];gameMoves=0;gameLock=0;
document.getElementById('gameScore').textContent='Moves: 0 | Matched: 0/8';document.getElementById('gameMsg').textContent='';
var b=document.getElementById('gameBoard');b.innerHTML='';
deck.forEach(function(c,i){var e=document.createElement('div');e.className='game-card';e.innerHTML='<span class="card-face">'+c+'</span><span class="card-back">ü§´</span>';e.onclick=function(){flipCard(i,e)};b.appendChild(e)})}
function flipCard(i,el){if(gameLock||flipped.length>=2||el.classList.contains('flipped')||el.classList.contains('matched'))return;el.classList.add('flipped');flipped.push({idx:i,el:el});if(flipped.length===2){gameMoves++;document.getElementById('gameScore').textContent='Moves: '+gameMoves+' | Matched: '+matched.length+'/8';
if(gameCards[flipped[0].idx]===gameCards[flipped[1].idx]){flipped[0].el.classList.add('matched');flipped[1].el.classList.add('matched');matched.push(gameCards[flipped[0].idx]);flipped=[];
document.getElementById('gameScore').textContent='Moves: '+gameMoves+' | Matched: '+matched.length+'/8';
if(matched.length===8)document.getElementById('gameMsg').textContent='üéâ You did it! '+gameMoves+' moves!'}
else{gameLock=1;setTimeout(function(){flipped[0].el.classList.remove('flipped');flipped[1].el.classList.remove('flipped');flipped=[];gameLock=0},800)}}}

// MOOD PICKER
function initMP(id,t){var c=document.getElementById(id);c.innerHTML='';moods.forEach(function(m){var e=document.createElement('div');e.className='mood-opt'+(m===(t==='l'?selLM:t==='c'?selCM:selMM)?' sel':'');e.textContent=m;e.onclick=function(){if(t==='l')selLM=m;else if(t==='c')selCM=m;else selMM=m;hMood(id,m)};c.appendChild(e)})}
function hMood(id,m){document.querySelectorAll('#'+id+' .mood-opt').forEach(function(e){e.classList.toggle('sel',e.textContent===m)})}

// HELPERS
function uBadge(id,n){var b=document.getElementById(id);if(!b)return;if(n>0){b.textContent=n>9?'9+':n;b.style.display='flex'}else b.style.display='none'}
function fD(d){var t=new Date(),y=new Date(t);y.setDate(y.getDate()-1);if(d.toDateString()===t.toDateString())return'Today';if(d.toDateString()===y.toDateString())return'Yesterday';return d.getDate()+' '+M[d.getMonth()]}
function fDT(ts){var d=new Date(ts);return d.getDate()+' '+M[d.getMonth()]+', '+pad(d.getHours())+':'+pad(d.getMinutes())}
function tAgo(ts){var d=Date.now()-new Date(ts).getTime(),m=Math.floor(d/60000);if(m<1)return'now';if(m<60)return m+'m';var h=Math.floor(m/60);if(h<24)return h+'h';return Math.floor(h/24)+'d'}
function pad(n){return n<10?'0'+n:''+n}
function esc(t){var d=document.createElement('div');d.textContent=t;return d.innerHTML}
function ldHTML(){return'<div style="text-align:center;padding:40px"><div class="sp-loader"><div class="sp-ldot"></div><div class="sp-ldot"></div><div class="sp-ldot"></div></div></div>'}
function playN(){try{var c=new(window.AudioContext||window.webkitAudioContext)(),o=c.createOscillator(),g=c.createGain();o.connect(g);g.connect(c.destination);o.frequency.value=880;o.type='sine';g.gain.setValueAtTime(.08,c.currentTime);g.gain.exponentialRampToValueAtTime(.001,c.currentTime+.4);o.start(c.currentTime);o.stop(c.currentTime+.4);var o2=c.createOscillator(),g2=c.createGain();o2.connect(g2);g2.connect(c.destination);o2.frequency.value=1100;o2.type='sine';g2.gain.setValueAtTime(.06,c.currentTime+.15);g2.gain.exponentialRampToValueAtTime(.001,c.currentTime+.5);o2.start(c.currentTime+.15);o2.stop(c.currentTime+.5)}catch(e){}}

// PARTICLES
function startPtc(){var c=document.getElementById('ptcBg');var h=['üíï','‚ô°','‚ô•','‚ú¶','‚ãÜ','‚úß','¬∑','üíñ','üíó'];function mk(){var e=document.createElement('div'),r=Math.random();if(r<.25){e.className='ptc ptc-heart';e.textContent=h[Math.floor(Math.random()*3)];e.style.fontSize=(Math.random()*12+6)+'px'}else if(r<.5){e.className='ptc ptc-star';e.textContent=h[3+Math.floor(Math.random()*3)];e.style.fontSize=(Math.random()*8+4)+'px';e.style.color='rgba(255,20,147,'+(Math.random()*.3+.1)+')'}else if(r<.8){e.className='ptc ptc-sparkle';var s=Math.random()*2.5+1;e.style.width=s+'px';e.style.height=s+'px'}else{e.className='ptc ptc-dot';var s2=Math.random()*3+1;e.style.width=s2+'px';e.style.height=s2+'px'}e.style.left=Math.random()*100+'vw';e.style.animationDuration=(Math.random()*12+12)+'s';e.style.animationDelay=Math.random()*4+'s';c.appendChild(e);setTimeout(function(){e.remove()},28000)}for(var i=0;i<12;i++)setTimeout(mk,i*200);setInterval(mk,1400)}

// RIPPLE
document.addEventListener('touchstart',function(e){var t=e.target.closest('.section-card,.liquid-btn,.btn-back,.quick-btn,.nav-avatar,.chat-send,.tod-btn,.l-tab,.letter-item,.pg-header-btn,.mood-opt,.heart-btn,.song-item,.p-btn,.game-card');if(!t)return;var r=t.getBoundingClientRect(),tc=e.touches[0],rp=document.createElement('div');rp.className='ripple';var sz=Math.max(r.width,r.height)*2.5;rp.style.width=rp.style.height=sz+'px';rp.style.left=(tc.clientX-r.left-sz/2)+'px';rp.style.top=(tc.clientY-r.top-sz/2)+'px';t.style.position=t.style.position||'relative';t.appendChild(rp);setTimeout(function(){rp.remove()},600)},{passive:true});

// INIT
function init(){startPtc();var s=localStorage.getItem('tss_user');setTimeout(function(){if(s){try{CU=JSON.parse(s);setupHome();connectSocket();nav('pg-home','anim-scale',false)}catch(e){localStorage.removeItem('tss_user');nav('pg-login','anim-fade',false)}}else nav('pg-login','anim-fade',false)},3000)}
init();
</script>
</body>
</html>
